(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{2907:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(7876),i=r(4232),n=r(9099),o=r(4234),s=r(2009),d=r(1162);function l(){let{uid:e}=(0,n.useRouter)().query,t=(0,i.useContext)(d.R),[r,l]=(0,i.useState)([]),[p,x]=(0,i.useState)(""),u=t&&e?[t.uid,e].sort().join("_"):null;(0,i.useEffect)(()=>{if(!u)return;let e=(0,s.P)((0,s.rJ)(o.db,"chats",u,"messages"),(0,s.My)("createdAt")),t=(0,s.aQ)(e,e=>{l(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[u]);let c=async()=>{if(t&&p.trim())try{await (0,s.gS)((0,s.rJ)(o.db,"chats",u,"messages"),{sender:t.uid,text:p.trim(),createdAt:(0,s.O5)()}),x("")}catch(e){console.error("메시지 전송 실패:",e)}};return(0,a.jsxs)("div",{style:{maxWidth:"600px",margin:"80px auto 0 auto",position:"relative"},children:[(0,a.jsx)("img",{src:"/data/image/cat2.png",alt:"cat",style:{position:"absolute",top:"-40px",right:"-40px",width:"100px",height:"100px",opacity:.9,zIndex:10,animation:"float 3s ease-in-out infinite"}}),(0,a.jsx)("style",{children:"\n        @keyframes float {\n          0% { transform: translateY(0px); }\n          50% { transform: translateY(-15px); }\n          100% { transform: translateY(0px); }\n        }\n      "}),(0,a.jsx)("h2",{style:{textAlign:"center",color:"#333",marginBottom:"24px"},children:"\uD83D\uDCAC 채팅"}),(0,a.jsx)("div",{style:{borderRadius:"16px",padding:"16px",height:"400px",overflowY:"auto",background:"rgba(255, 255, 255, 0.1)",marginBottom:"20px",boxShadow:"inset 0 0 12px rgba(0,0,0,0.1)"},children:r.map(e=>(0,a.jsx)("div",{style:{textAlign:e.sender===(null==t?void 0:t.uid)?"right":"left",marginBottom:"10px"},children:(0,a.jsx)("span",{style:{display:"inline-block",background:e.sender===(null==t?void 0:t.uid)?"rgba(217, 14, 21, 0.8)":"rgba(255, 255, 255, 0.6)",color:e.sender===(null==t?void 0:t.uid)?"white":"black",padding:"8px 12px",borderRadius:"16px",maxWidth:"70%",backdropFilter:"blur(8px)"},children:e.text})},e.id))}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"===e.key&&c()},style:{flex:1,padding:"10px",borderRadius:"12px",border:"1px solid #ccc",backgroundColor:"rgba(255,255,255,0.6)",fontSize:"16px"},placeholder:"메시지를 입력하세요"}),(0,a.jsx)("button",{onClick:c,style:{padding:"10px 20px",borderRadius:"12px",border:"none",backgroundColor:"#d90e15",color:"white",fontWeight:"bold"},children:"전송"})]})]})}},7720:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return r(2907)}])},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7720)),_N_E=e.O()}]);