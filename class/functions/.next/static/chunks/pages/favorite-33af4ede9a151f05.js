(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{5004:(e,a,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorite",function(){return n(5513)}])},5458:e=>{e.exports={favoriteGrid:"favorite_favoriteGrid__f6M5T",placeCard:"favorite_placeCard__BeE8L",placeHeader:"favorite_placeHeader__ivajP",placeLogo:"favorite_placeLogo___PbeS",placeName:"favorite_placeName__ZXui_",placeType:"favorite_placeType__0qDfV",starBtn:"favorite_starBtn__ZB2uU",placeInfo:"favorite_placeInfo__xr_Bh",infoNum:"favorite_infoNum__f0mF3",placeFooter:"favorite_placeFooter__Rwbco",linkBtn:"favorite_linkBtn__lJKrz"}},5513:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>h});var i=n(7876),l=n(9099),t=n(4232),r=n(1162),_=n(1724),s=n(4234),c=n(8819),o=n.n(c),p=n(5458),d=n.n(p);function h(){let e=(0,l.useRouter)(),a=(0,t.useContext)(r.R),n=a?"favorites_".concat(a.uid):"favorites_guest",[c,p]=(0,t.useState)([]),[h,u]=(0,t.useState)([]);(0,t.useEffect)(()=>{{let e=localStorage.getItem(n);p(e?JSON.parse(e):[])}},[n]),(0,t.useEffect)(()=>{fetch("/api/loadReviews").then(e=>e.json()).then(e=>u(e.reviews||[])).catch(()=>u([]))},[]);let f=e=>{let a=c.filter(a=>a.url!==e);p(a),localStorage.setItem(n,JSON.stringify(a))},m=async()=>{await (0,_.CI)(s.j),alert("로그아웃 되었습니다."),e.push("/")},v=e=>"/data/image/".concat(e.replace(/\s/g,"_").replace(/\//g,"_"),".jpg"),x=e=>{let a=h.filter(a=>a.placeId===e).map(e=>e.rating);return 0===a.length?0:a.reduce((e,a)=>e+a,0)/a.length},g=e=>h.filter(a=>a.placeId===e).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("header",{className:o().header,children:[(0,i.jsx)("div",{className:o().logo,style:{cursor:"pointer"},onClick:()=>e.push("/"),children:"KNUMAP"}),(0,i.jsxs)("nav",{className:o().menu,children:[(0,i.jsx)("button",{onClick:()=>e.push("/partner"),children:"제휴"}),(0,i.jsx)("button",{onClick:()=>e.push("/social"),children:"소셜"}),(0,i.jsx)("button",{onClick:()=>e.push("/favorite"),children:"즐겨찾기"})]}),(0,i.jsx)("div",{className:o().userMenu,children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("a",{href:"#",onClick:a=>{a.preventDefault(),e.push("/profile")},children:"내 정보"}),(0,i.jsx)("span",{style:{margin:"0 6px"},children:"|"}),(0,i.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m()},children:"로그아웃"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("a",{href:"#",onClick:a=>{a.preventDefault(),e.push("/login")},children:"로그인"}),(0,i.jsx)("span",{style:{margin:"0 6px"},children:"|"}),(0,i.jsx)("a",{href:"#",onClick:a=>{a.preventDefault(),e.push("/signup")},children:"회원가입"})]})})]}),(0,i.jsxs)("main",{className:o().main,children:[(0,i.jsx)("div",{className:o().pageTitle,children:"즐겨찾기"}),(0,i.jsx)("div",{className:d().favoriteGrid,children:0===c.length?(0,i.jsx)("div",{style:{color:"#bbb",marginTop:20,textAlign:"center",gridColumn:"1/-1"},children:"즐겨찾기한 장소가 없습니다."}):c.map(a=>{let n=x(a.url),l=g(a.url);return(0,i.jsxs)("div",{className:d().placeCard,children:[(0,i.jsxs)("div",{className:d().placeHeader,children:[(0,i.jsx)("img",{src:v(a.name),alt:"장소 로고",className:d().placeLogo,onError:e=>{e.target.onerror=null,e.target.src="/data/image.jpg"}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:d().placeName,children:a.name}),a.phone?(0,i.jsxs)("div",{style:{marginTop:4,fontSize:14,color:"#555"},children:["\uD83D\uDCDE ",a.phone]}):(0,i.jsx)("div",{style:{marginTop:4,fontSize:14,color:"#999"},children:"전화번호 없음"}),(0,i.jsx)("div",{className:d().placeType,children:a.type})]}),(0,i.jsx)("button",{className:d().starBtn,style:{color:"#D90E15",transition:"color 0.2s"},onClick:()=>f(a.url),"aria-label":"즐겨찾기 해제",children:"★"})]}),(0,i.jsxs)("div",{className:d().placeInfo,children:[(0,i.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["리뷰 수 ",l,"명"]}),(0,i.jsxs)("div",{children:["평균 평점 ",(0,i.jsxs)("span",{className:d().infoNum,children:[n.toFixed(1)," / 5"," ",[1,2,3,4,5].map(e=>(0,i.jsx)("span",{style:{color:n>=e?"#D90E15":"#ccc",fontSize:18},children:"★"},e))]})]})]}),(0,i.jsxs)("div",{className:d().placeFooter,children:[(0,i.jsx)("button",{className:d().linkBtn,onClick:()=>window.open(a.url,"_blank"),children:"홈페이지"}),(0,i.jsx)("button",{className:d().linkBtn,onClick:()=>e.push({pathname:"/review",query:{placeId:a.url}}),children:"지도 리뷰"})]})]},a.url)})})]})]})}},8819:e=>{e.exports={header:"Main_header__spRhi",logo:"Main_logo__XbNnm",menu:"Main_menu__NG9Dn",userMenu:"Main_userMenu__H7lmt",main:"Main_main__xfLto",pageTitle:"Main_pageTitle__Rv9tc",filterRow:"Main_filterRow__vM183",searchInput:"Main_searchInput__N0eT0",filterSelect:"Main_filterSelect__3lmVN",searchBtn:"Main_searchBtn__KP3XI",applyBtn:"Main_applyBtn__XZxi3",contentRow:"Main_contentRow__yFfRx",leftPanel:"Main_leftPanel__5WPOE",tabRow:"Main_tabRow__nUmVn",tabActive:"Main_tabActive__lVoeE",yearInfo:"Main_yearInfo__lRjjQ",placeCard:"Main_placeCard__85wC7",placeHeader:"Main_placeHeader__7_kYF",placeLogo:"Main_placeLogo__CuaA0",placeName:"Main_placeName__4e1Tm",placeType:"Main_placeType__Uor9k",starBtn:"Main_starBtn__AVLVd",placeInfo:"Main_placeInfo__utfQ7",infoNum:"Main_infoNum___kRuL",placeFooter:"Main_placeFooter__hS7_v",linkBtn:"Main_linkBtn__1S11h",authContainer:"Main_authContainer__46NWp",inputBox:"Main_inputBox__1lPYB",authButton:"Main_authButton__FlRHR",headerHidden:"Main_headerHidden__Rt8yR",headerVisible:"Main_headerVisible__TfvH8",highRating:"Main_highRating__MuZjg",lowRating:"Main_lowRating__wmLLu",newBadge:"Main_newBadge__3623I",favOn:"Main_favOn__G8Vdx"}},9099:(e,a,n)=>{e.exports=n(8253)}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(5004)),_N_E=e.O()}]);