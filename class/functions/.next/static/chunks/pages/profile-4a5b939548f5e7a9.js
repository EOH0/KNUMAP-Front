(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{3086:(e,n,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a(4098)}])},4098:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>u});var t=a(7876),i=a(4232),l=a(9099),r=a(1724),o=a(2009),s=a(5226),d=a(1162),c=a(4234),p=a(8819),_=a.n(p);function u(){let e=(0,i.useContext)(d.R),n=(0,l.useRouter)(),a=(0,i.useRef)(null),[p,u]=(0,i.useState)("/knu-default.png"),[h,x]=(0,i.useState)(!1),[g,f]=(0,i.useState)(""),[m,b]=(0,i.useState)(""),[j,y]=(0,i.useState)(""),[M,v]=(0,i.useState)(""),w={사회과학대학:["정치외교학과","지리학과","사회학과","심리학과","미디어커뮤니케이션학과","사회과학대학 자율전공학부","사회복지학부"],치과대학:["치과대학"],인문대학:["영어영문학과","독어독문학과","사학과","국어국문학과","고고인류학과","불어불문학과","일어일문학과","노어노문학과","중어중문학과","철학과","한문학과"],IT대:["전기공학과","컴퓨터학부","전자공학부","전자공학부 인공지능"],행정대:["행정학부"],생활과학대학:["식품영양학과","의류학과","아동학부"]},R=Object.keys(w);(0,i.useEffect)(()=>{(async()=>{if(e)try{let n=await (0,o.x7)((0,o.H9)(c.db,"users",e.uid));if(n.exists()){let e=n.data();f(e.name||""),b(e.college||""),y(e.department||""),e.profileImgUrl&&u(e.profileImgUrl)}}catch(e){console.error("프로필 불러오기 실패:",e)}})()},[e]);let k=async()=>{await (0,r.CI)(c.j),alert("로그아웃 되었습니다."),n.push("/")},C=async n=>{let a=n.target.files[0];if(!a||!e)return;let t=new FileReader;t.onloadend=async()=>{let n=t.result,a=(0,s.c7)(),i=(0,s.KR)(a,"profileImages/".concat(e.uid));try{await (0,s.ls)(i,n,"data_url");let a=await (0,s.qk)(i);u(a),await (0,o.BN)((0,o.H9)(c.db,"users",e.uid),{name:g,college:m,department:j,email:e.email,profileImgUrl:a,updatedAt:new Date}),v("✅ 이미지 저장 완료!")}catch(e){console.error("이미지 업로드 실패:",e),v("❌ 이미지 저장 실패")}},t.readAsDataURL(a)},N=async()=>{if(e)try{await (0,o.BN)((0,o.H9)(c.db,"users",e.uid),{name:g,college:m,department:j,email:e.email,profileImgUrl:p,updatedAt:new Date}),v("✅ 저장 완료!")}catch(e){console.error("저장 실패:",e),v("❌ 저장 실패")}};return e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("header",{className:_().header,children:[(0,t.jsx)("div",{className:_().logo,onClick:()=>n.push("/"),children:"KNUMAP"}),(0,t.jsxs)("nav",{className:_().menu,children:[(0,t.jsx)("button",{onClick:()=>n.push("/partner"),children:"제휴"}),(0,t.jsx)("button",{onClick:()=>n.push("/social"),children:"소셜"}),(0,t.jsx)("button",{onClick:()=>n.push("/favorite"),children:"즐겨찾기"})]}),(0,t.jsxs)("div",{className:_().userMenu,children:[(0,t.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),n.push("/profile")},children:"내 정보"}),(0,t.jsx)("span",{style:{margin:"0 6px"},children:"|"}),(0,t.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),k()},children:"로그아웃"})]})]}),(0,t.jsx)("main",{className:_().main,children:(0,t.jsxs)("div",{style:{padding:"40px",background:"#fff",borderRadius:"16px",maxWidth:"600px",margin:"40px auto",boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[(0,t.jsxs)("div",{style:{position:"relative",width:"120px",height:"120px",margin:"0 auto",marginBottom:"24px"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>a.current.click(),children:[(0,t.jsx)("img",{src:p,alt:"프로필 이미지",style:{width:"100%",height:"100%",borderRadius:"50%",border:"2px solid #ccc",objectFit:"cover",cursor:"pointer"},onError:e=>{e.target.onerror=null,e.target.src="/knu-default.png"}}),h&&(0,t.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"24px",fontWeight:"bold",pointerEvents:"none"},children:"✏️"}),(0,t.jsx)("input",{type:"file",accept:"image/*",ref:a,onChange:C,style:{display:"none"}})]}),(0,t.jsxs)("div",{style:{fontSize:"18px",lineHeight:"2.2",textAlign:"left",marginBottom:"20px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{fontWeight:"bold"},children:"이름"}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"이름을 입력하세요",style:{width:"100%",padding:"10px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",marginTop:"4px"}})]}),(0,t.jsxs)("div",{style:{marginTop:"16px"},children:[(0,t.jsx)("label",{style:{fontWeight:"bold"},children:"단과대학"}),(0,t.jsx)("br",{}),(0,t.jsxs)("select",{value:m,onChange:e=>{b(e.target.value),y("")},style:{width:"100%",padding:"10px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",marginTop:"4px"},children:[(0,t.jsx)("option",{value:"",children:"선택하세요"}),R.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),m&&(0,t.jsxs)("div",{style:{marginTop:"16px"},children:[(0,t.jsx)("label",{style:{fontWeight:"bold"},children:"학과"}),(0,t.jsx)("br",{}),(0,t.jsxs)("select",{value:j,onChange:e=>y(e.target.value),style:{width:"100%",padding:"10px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",marginTop:"4px"},children:[(0,t.jsx)("option",{value:"",children:"선택하세요"}),w[m].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{style:{textAlign:"center",marginTop:"16px"},children:[(0,t.jsx)("button",{onClick:N,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"저장"}),(0,t.jsx)("div",{style:{marginTop:10,color:"#555"},children:M})]}),(0,t.jsx)("div",{style:{marginTop:"30px",textAlign:"center"},children:(0,t.jsx)("button",{onClick:k,style:{padding:"10px 20px",backgroundColor:"#D90E15",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"로그아웃"})})]})})]}):(n.push("/login"),(0,t.jsx)("div",{style:{padding:40},children:"로그인이 필요합니다..."}))}},8819:e=>{e.exports={header:"Main_header__spRhi",logo:"Main_logo__XbNnm",menu:"Main_menu__NG9Dn",userMenu:"Main_userMenu__H7lmt",main:"Main_main__xfLto",pageTitle:"Main_pageTitle__Rv9tc",filterRow:"Main_filterRow__vM183",searchInput:"Main_searchInput__N0eT0",filterSelect:"Main_filterSelect__3lmVN",searchBtn:"Main_searchBtn__KP3XI",applyBtn:"Main_applyBtn__XZxi3",contentRow:"Main_contentRow__yFfRx",leftPanel:"Main_leftPanel__5WPOE",tabRow:"Main_tabRow__nUmVn",tabActive:"Main_tabActive__lVoeE",yearInfo:"Main_yearInfo__lRjjQ",placeCard:"Main_placeCard__85wC7",placeHeader:"Main_placeHeader__7_kYF",placeLogo:"Main_placeLogo__CuaA0",placeName:"Main_placeName__4e1Tm",placeType:"Main_placeType__Uor9k",starBtn:"Main_starBtn__AVLVd",placeInfo:"Main_placeInfo__utfQ7",infoNum:"Main_infoNum___kRuL",placeFooter:"Main_placeFooter__hS7_v",linkBtn:"Main_linkBtn__1S11h",authContainer:"Main_authContainer__46NWp",inputBox:"Main_inputBox__1lPYB",authButton:"Main_authButton__FlRHR",headerHidden:"Main_headerHidden__Rt8yR",headerVisible:"Main_headerVisible__TfvH8",highRating:"Main_highRating__MuZjg",lowRating:"Main_lowRating__wmLLu",newBadge:"Main_newBadge__3623I",favOn:"Main_favOn__G8Vdx"}}},e=>{var n=n=>e(e.s=n);e.O(0,[992,636,593,792],()=>n(3086)),_N_E=e.O()}]);