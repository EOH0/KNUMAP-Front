(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561],{546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},1393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=n(4232),r=a.useLayoutEffect,i=a.useEffect;function l(e){let{headManager:t,reduceComponentsToState:n}=e;function l(){if(t&&t.mountedInstances){let r=a.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(r,e))}}return r(()=>{var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),()=>{var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}}),r(()=>(t&&(t._pendingUpdate=l),()=>{t&&(t._pendingUpdate=l)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},5572:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/social",function(){return n(5714)}])},5648:(e,t)=>{"use strict";function n(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:a=!1}=void 0===e?{}:e;return t||n&&a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return n}})},5714:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(7876),r=n(7328),i=n.n(r),l=n(4232),o=n(9099),s=n(8819),d=n.n(s),u=n(1162),c=n(1724),p=n(4234),_=n(2009);function f(){let e=(0,o.useRouter)(),t=(0,l.useContext)(u.R),[n,r]=(0,l.useState)([]),[s,f]=(0,l.useState)(""),[h,x]=(0,l.useState)([]),[m,g]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=(await (0,_.GG)((0,_.rJ)(p.db,"users"))).docs.map(e=>({uid:e.id,...e.data()}));r(e)}catch(e){console.error("전체 사용자 불러오기 실패:",e)}})()},[]),(0,l.useEffect)(()=>{(async()=>{if(t)try{let e=await (0,_.x7)((0,_.H9)(p.db,"users",t.uid));if(e.exists()){let t=e.data().friends||[],n=await Promise.all(t.map(async e=>{let t=await (0,_.x7)((0,_.H9)(p.db,"users",e));return t.exists()?{uid:e,...t.data()}:null}));g(n.filter(Boolean))}}catch(e){console.error("친구 목록 불러오기 실패:",e)}})()},[t]);let y=async e=>{if(!t)return alert("로그인 후 이용 가능합니다.");if(!e)return alert("대상을 선택해주세요.");if(e.uid===t.uid)return alert("자기 자신은 추가할 수 없습니다.");if(m.some(t=>t.uid===e.uid))return alert("이미 친구입니다.");try{let n=(0,_.H9)(p.db,"users",t.uid);await (0,_.mZ)(n,{friends:(0,_.hq)(e.uid)}),alert("친구 추가 완료"),f(""),x([]),g(t=>[...t,e])}catch(e){console.error("친구 추가 실패:",e),alert("추가 중 오류 발생")}},b=async e=>{if(t)try{let n=(0,_.H9)(p.db,"users",t.uid);await (0,_.mZ)(n,{friends:(0,_.C3)(e)}),g(t=>t.filter(t=>t.uid!==e))}catch(e){console.error("친구 삭제 실패:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"KNUMAP 소셜"})}),(0,a.jsxs)("header",{className:d().header,children:[(0,a.jsx)("div",{className:d().logo,onClick:()=>e.push("/"),children:"KNUMAP"}),(0,a.jsxs)("nav",{className:d().menu,children:[(0,a.jsx)("button",{onClick:()=>e.push("/partner"),children:"제휴"}),(0,a.jsx)("button",{onClick:()=>e.push("/social"),children:"소셜"}),(0,a.jsx)("button",{onClick:()=>e.push("/favorite"),children:"즐겨찾기"})]}),(0,a.jsx)("div",{className:d().userMenu,children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.push("/profile")},children:"내 정보"}),(0,a.jsx)("span",{style:{margin:"0 6px"},children:"|"}),(0,a.jsx)("a",{href:"#",onClick:async t=>{t.preventDefault(),await (0,c.CI)(p.j),alert("로그아웃 되었습니다."),e.push("/")},children:"로그아웃"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.push("/login")},children:"로그인"}),(0,a.jsx)("span",{style:{margin:"0 6px"},children:"|"}),(0,a.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.push("/signup")},children:"회원가입"})]})})]}),(0,a.jsxs)("main",{className:d().main,children:[(0,a.jsxs)("section",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"40px",background:"#fff",padding:"32px",borderRadius:"16px",boxShadow:"0 0 16px rgba(0,0,0,0.05)",maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",marginBottom:"20px"},children:"\uD83D\uDC65 친구 추가 (이름 자동완성)"}),(0,a.jsx)("input",{type:"text",placeholder:"상대방 이름을 입력하세요",value:s,onChange:e=>{let a=e.target.value;f(a),""===a.trim()?x([]):x(n.filter(e=>e.name&&e.name.includes(a.trim())&&e.uid!==(null==t?void 0:t.uid)).slice(0,5))},style:{padding:"12px 16px",borderRadius:"10px",border:"1px solid #ccc",width:"70%",fontSize:"16px"}}),(0,a.jsx)("ul",{style:{listStyle:"none",marginTop:"10px",padding:0,width:"100%"},children:h.map(e=>(0,a.jsxs)("li",{style:{marginTop:"6px",fontSize:"14px",color:"#555",cursor:"pointer",textAlign:"center"},onClick:()=>y(e),children:[e.name," (",e.uid,") 친구로 추가하기"]},e.uid))})]}),(0,a.jsxs)("section",{style:{marginTop:"40px",textAlign:"center",background:"#fff",padding:"32px",borderRadius:"16px",boxShadow:"0 0 16px rgba(0,0,0,0.05)",maxWidth:"600px",marginLeft:"auto",marginRight:"auto"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",marginBottom:"20px"},children:"\uD83D\uDCCB 내 친구 목록"}),0===m.length?(0,a.jsx)("p",{style:{color:"#999"},children:"아직 친구가 없습니다."}):(0,a.jsx)("ul",{style:{listStyle:"none",padding:0},children:m.map(t=>(0,a.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"12px 0",fontSize:"16px",gap:"10px"},children:[(0,a.jsx)("strong",{style:{cursor:"pointer",color:"#D90E15"},onClick:()=>e.push("/profile?uid=".concat(t.uid)),children:t.name||"이름 없음"}),(0,a.jsxs)("span",{style:{color:"#666"},children:["(",t.uid,")"]}),(0,a.jsx)("button",{onClick:()=>e.push("/chat?uid=".concat(t.uid)),style:{padding:"6px 12px",borderRadius:"8px",backgroundColor:"#007bff",color:"white",border:"none"},children:"채팅"}),(0,a.jsx)("button",{onClick:()=>b(t.uid),style:{padding:"6px 12px",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",cursor:"pointer"},children:"삭제"})]},t.uid))})]})]})]})}},7328:(e,t,n)=>{e.exports=n(9836)},8819:e=>{e.exports={header:"Main_header__spRhi",logo:"Main_logo__XbNnm",menu:"Main_menu__NG9Dn",userMenu:"Main_userMenu__H7lmt",main:"Main_main__xfLto",pageTitle:"Main_pageTitle__Rv9tc",filterRow:"Main_filterRow__vM183",searchInput:"Main_searchInput__N0eT0",filterSelect:"Main_filterSelect__3lmVN",searchBtn:"Main_searchBtn__KP3XI",applyBtn:"Main_applyBtn__XZxi3",contentRow:"Main_contentRow__yFfRx",leftPanel:"Main_leftPanel__5WPOE",tabRow:"Main_tabRow__nUmVn",tabActive:"Main_tabActive__lVoeE",yearInfo:"Main_yearInfo__lRjjQ",placeCard:"Main_placeCard__85wC7",placeHeader:"Main_placeHeader__7_kYF",placeLogo:"Main_placeLogo__CuaA0",placeName:"Main_placeName__4e1Tm",placeType:"Main_placeType__Uor9k",starBtn:"Main_starBtn__AVLVd",placeInfo:"Main_placeInfo__utfQ7",infoNum:"Main_infoNum___kRuL",placeFooter:"Main_placeFooter__hS7_v",linkBtn:"Main_linkBtn__1S11h",authContainer:"Main_authContainer__46NWp",inputBox:"Main_inputBox__1lPYB",authButton:"Main_authButton__FlRHR",headerHidden:"Main_headerHidden__Rt8yR",headerVisible:"Main_headerVisible__TfvH8",highRating:"Main_highRating__MuZjg",lowRating:"Main_lowRating__wmLLu",newBadge:"Main_newBadge__3623I",favOn:"Main_favOn__G8Vdx"}},9099:(e,t,n)=>{e.exports=n(8253)},9836:(e,t,n)=>{"use strict";var a=n(5364);Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return x},defaultHead:function(){return p}});let r=n(4252),i=n(8365),l=n(7876),o=i._(n(4232)),s=r._(n(1393)),d=n(9896),u=n(6834),c=n(5648);function p(e){void 0===e&&(e=!1);let t=[(0,l.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,l.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function _(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(546);let f=["name","httpEquiv","charSet","itemProp"];function h(e,t){let{inAmpMode:n}=t;return e.reduce(_,[]).reverse().concat(p(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,a={};return r=>{let i=!0,l=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){l=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?i=!1:t.add(r.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(r.props.hasOwnProperty(t))if("charSet"===t)n.has(t)?i=!1:n.add(t);else{let e=r.props[t],n=a[t]||new Set;("name"!==t||!l)&&n.has(e)?i=!1:(n.add(e),a[t]=n)}}}return i}}()).reverse().map((e,t)=>{let r=e.key||t;if(a.env.__NEXT_OPTIMIZE_FONTS&&!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:r})})}let x=function(e){let{children:t}=e,n=(0,o.useContext)(d.AmpStateContext),a=(0,o.useContext)(u.HeadManagerContext);return(0,l.jsx)(s.default,{reduceComponentsToState:h,headManager:a,inAmpMode:(0,c.isInAmpMode)(n),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return a}});let a=n(4252)._(n(4232)).default.createContext({})}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(5572)),_N_E=e.O()}]);